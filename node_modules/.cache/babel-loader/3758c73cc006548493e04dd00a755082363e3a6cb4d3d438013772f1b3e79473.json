{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import'./index.css';import{ShoppingCartOutlined}from'@ant-design/icons';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Home(){const[productList,setPorductList]=useState([]);const[least,setLeast]=useState(false);// 执行获取商品信息的函数\nconst getProduct=()=>{axios.get('https://hmajax.itheima.net/api/news').then(result=>{setPorductList(result.data.data);});};// 只调用一次商品信息\nuseEffect(getProduct,[]);// 添加事件委托，实现单个商品数量的增减\nconst updateMsg=e=>{// 判断点击的按钮是-或者+，执行不同的更新操作\nif(e.target.className.includes('sub')){// 监测商品数量是否禁用-按钮\nif(e.target.value<=0){setLeast(true);}else{setLeast(false);const newProductList=productList.map(item=>{if(+item.cmtcount===+e.target.value){const newCount=+item.cmtcount-1;console.log(newCount);return{...item,cmtcount:newCount};}return item;});setPorductList(newProductList);}}if(e.target.className.includes('add')){const newProductList=productList.map(item=>{if(+item.cmtcount===+e.target.value){const newCount=+item.cmtcount+1;return{...item,cmtcount:newCount};}return item;});setPorductList(newProductList);}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h1\",{children:[/*#__PURE__*/_jsx(ShoppingCartOutlined,{}),\"\\xA0\\u8D2D\\u7269\\u8F66\"]}),/*#__PURE__*/_jsx(\"ul\",{className:\"product-show\",children:productList.map(item=>{return/*#__PURE__*/_jsxs(\"li\",{id:item.id,onClick:updateMsg,children:[/*#__PURE__*/_jsxs(\"span\",{className:\"mode-show\",children:[/*#__PURE__*/_jsx(\"img\",{src:item.img}),/*#__PURE__*/_jsx(\"i\",{children:item.source})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"num-show\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"product-num sub\",disabled:least,value:item.cmtcount,children:\"-\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"product-num\",value:item.cmtcount,defaultValue:''}),/*#__PURE__*/_jsx(\"button\",{className:\"product-num add\",value:item.cmtcount,children:\"+\"})]})]},item.id);})})]});}","map":{"version":3,"names":["React","useEffect","useState","axios","ShoppingCartOutlined","jsx","_jsx","jsxs","_jsxs","Home","productList","setPorductList","least","setLeast","getProduct","get","then","result","data","updateMsg","e","target","className","includes","value","newProductList","map","item","cmtcount","newCount","console","log","children","id","onClick","src","img","source","disabled","type","defaultValue"],"sources":["C:/Users/11841/Desktop/LJ的包容性文件夹/.A实习冲刺/react-project/src/pages/ShoppingCart/index.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport axios from 'axios'\r\nimport './index.css'\r\nimport {\r\n  ShoppingCartOutlined,\r\n} from '@ant-design/icons'\r\nexport default function Home() {\r\n  const [productList, setPorductList] = useState([])\r\n  const [least, setLeast] = useState(false)\r\n\r\n  // 执行获取商品信息的函数\r\n  const getProduct = () => {\r\n    axios.get('https://hmajax.itheima.net/api/news').then(result => {\r\n      setPorductList(result.data.data);\r\n    })\r\n  }\r\n\r\n  // 只调用一次商品信息\r\n  useEffect(getProduct, [])\r\n\r\n  // 添加事件委托，实现单个商品数量的增减\r\n  const updateMsg = (e) => {\r\n    // 判断点击的按钮是-或者+，执行不同的更新操作\r\n    if (e.target.className.includes('sub')) {\r\n      // 监测商品数量是否禁用-按钮\r\n      if (e.target.value <= 0) {\r\n        setLeast(true)\r\n      } else {\r\n        setLeast(false)\r\n        const newProductList = productList.map(item => {\r\n          if (+item.cmtcount === +e.target.value) {\r\n            const newCount = +item.cmtcount - 1\r\n            console.log(newCount);\r\n            return { ...item, cmtcount: newCount }\r\n          }\r\n          return item\r\n        }\r\n        )\r\n        setPorductList(newProductList)\r\n      }\r\n\r\n    }\r\n    if (e.target.className.includes('add')) {\r\n      const newProductList = productList.map(item => {\r\n        if (+item.cmtcount === +e.target.value) {\r\n          const newCount = +item.cmtcount + 1\r\n          return { ...item, cmtcount: newCount }\r\n        }\r\n        return item\r\n      }\r\n      )\r\n      setPorductList(newProductList)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h1><ShoppingCartOutlined />&nbsp;购物车</h1>\r\n      <ul className='product-show'>\r\n        {\r\n          productList.map(item => {\r\n            return <li key={item.id} id={item.id} onClick={updateMsg} >\r\n              <span className='mode-show'>\r\n                {/* 商品展示区 */}\r\n                <img src={item.img} />\r\n                <i>{item.source}</i>\r\n              </span>\r\n              <span className='num-show'>\r\n                <button className='product-num sub' disabled={least} value={item.cmtcount} >-</button>\r\n                <input type=\"text\" className='product-num' value={item.cmtcount} defaultValue={''} />\r\n                <button className='product-num add' value={item.cmtcount} >+</button>\r\n              </span>\r\n            </li>\r\n          })\r\n        }\r\n      </ul>\r\n    </div>\r\n  )\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}